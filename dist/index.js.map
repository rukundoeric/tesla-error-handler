{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["/* eslint-disable import/prefer-default-export */\nimport React, { Component } from 'react'\n\nexport const withErrorHandler = (WrappedComponent, axios) => class extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      error: null\n    }\n\n    this.reqInterceptor = axios.interceptors.request.use(req => {\n      this.setState({ error: null })\n      return req\n    })\n\n    this.resInterceptor = axios.interceptors.response.use(\n      res => res,\n      (error) => {\n        const { response } = error\n        const style = {\n          width: '600px',\n          margin: '50px auto',\n          'min-height': '80vh',\n          background: 'transparent',\n          border: 'none'\n        }\n        let responseError\n\n        switch (response.status) {\n          case 404:\n            responseError = {\n              status: 404,\n              message: (\n                <div className='card error-handler-div' style={style}>\n                  <img src='https://firebasestorage.googleapis.com/v0/b/authorshaven-cebfb.appspot.com/o/images%2FnotFound.svg?alt=media&token=f791a123-c9b5-4278-953e-0d39f5a3fe29' className='card-img-top' alt='Not Found' />\n                  <p className='card-title'>{response.data.message}</p>\n                </div>\n              )\n            }\n            this.setState({ error: responseError })\n            break\n          default:\n        }\n      }\n    )\n  }\n\n  componentWillUnmount() {\n    axios.interceptors.request.eject(this.reqInterceptor)\n    axios.interceptors.response.eject(this.resInterceptor)\n  }\n\n  errorComfirmedHandler = () => {\n    this.setState({ error: null })\n  }\n\n  render() {\n    const { error } = this.state\n    if (!error) {\n      return <WrappedComponent {...this.props} />\n    }\n    return error.message\n  }\n}\n"],"names":["withErrorHandler","WrappedComponent","axios","props","errorComfirmedHandler","setState","error","state","reqInterceptor","interceptors","request","use","req","resInterceptor","response","res","style","responseError","status","React","data","message","eject","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA,IAAaA,mBAAmB,SAAnBA,gBAAmB,CAACC,gBAAD,EAAmBC,KAAnB;;;;qBAClBC,KAAZ,EAAmB;;;mHACXA,KADW;;YAgDnBC,qBAhDmB,GAgDK,YAAM;cACvBC,QAAL,CAAc,EAAEC,OAAO,IAAT,EAAd;OAjDiB;;YAEZC,KAAL,GAAa;eACJ;OADT;;YAIKC,cAAL,GAAsBN,MAAMO,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,eAAO;cACrDN,QAAL,CAAc,EAAEC,OAAO,IAAT,EAAd;eACOM,GAAP;OAFoB,CAAtB;;YAKKC,cAAL,GAAsBX,MAAMO,YAAN,CAAmBK,QAAnB,CAA4BH,GAA5B,CACpB;eAAOI,GAAP;OADoB,EAEpB,UAACT,KAAD,EAAW;YACDQ,QADC,GACYR,KADZ,CACDQ,QADC;;YAEHE,QAAQ;iBACL,OADK;kBAEJ,WAFI;wBAGE,MAHF;sBAIA,aAJA;kBAKJ;SALV;YAOIC,sBAAJ;;gBAEQH,SAASI,MAAjB;eACO,GAAL;4BACkB;sBACN,GADM;uBAGZC;;kBAAK,WAAU,wBAAf,EAAwC,OAAOH,KAA/C;sDACO,KAAI,yJAAT,EAAmK,WAAU,cAA7K,EAA4L,KAAI,WAAhM,GADF;;;oBAEK,WAAU,YAAb;2BAAoCI,IAAT,CAAcC;;;aAL/C;kBASKhB,QAAL,CAAc,EAAEC,OAAOW,aAAT,EAAd;;;;OAxBc,CAAtB;;;;;;6CAgCqB;cACfR,YAAN,CAAmBC,OAAnB,CAA2BY,KAA3B,CAAiC,KAAKd,cAAtC;cACMC,YAAN,CAAmBK,QAAnB,CAA4BQ,KAA5B,CAAkC,KAAKT,cAAvC;;;;+BAOO;YACCP,KADD,GACW,KAAKC,KADhB,CACCD,KADD;;YAEH,CAACA,KAAL,EAAY;iBACHa,6BAAC,gBAAD,EAAsB,KAAKhB,KAA3B,CAAP;;eAEKG,MAAMe,OAAb;;;;IA1DuEE,eAA3C;CAAzB;;;;"}